{% extends 'base.html' %}

{% block content %}
<div class="login-wrapper">
  <div class="login-card">
    <h2 class="card-title">Entrar</h2>
    <form method="POST" action="{{ url_for('login') }}" class="needs-validation" novalidate>
      {{ form.hidden_tag() }}
      <div class="mb-4">
        <label for="email" class="form-label">{{ form.email.label.text }}</label>
        <div class="input-group has-validation">
          <span class="input-group-text"><i class="bi bi-envelope-fill text-muted"></i></span>
          {{ form.email(id='email', class='form-control', placeholder='seu@email.com', required=True) }}
          <div class="invalid-feedback">
            Por favor, insira um email válido.
          </div>
        </div>
      </div>

      <div class="mb-4">
        <label for="password" class="form-label">{{ form.password.label.text }}</label>
        <div class="input-group has-validation">
          <span class="input-group-text"><i class="bi bi-lock-fill text-muted"></i></span>
          {{ form.password(id='password', class='form-control', placeholder='Senha', required=True) }}
          <div class="invalid-feedback">
            Por favor, digite sua senha.
          </div>
        </div>
      </div>

      <div class="d-grid mb-3">
        {{ form.submit(class='btn btn-primary btn-lg') }}
      </div>

      <div class="text-center">
        <a href="{{ url_for('register') }}" class="link-secondary">Não tem conta? Cadastre-se</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  (function () {
    'use strict'
    var forms = document.querySelectorAll('.needs-validation')
    Array.prototype.slice.call(forms).forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }
        form.classList.add('was-validated')
      }, false)
    })
  })()
</script>

<style>
  body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica Neue, Arial, sans-serif;
    background: linear-gradient(270deg, #f5f5f7, #ffe0f0);
    background-size: 400% 400%;
    animation: gradientTransition 12s ease infinite;
  }

  @keyframes gradientTransition {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  .login-wrapper {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem;
  }

  .login-card {
    background-color: #ffffff;
    border-radius: 1.25rem;
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.08);
    max-width: 420px;
    width: 100%;
    padding: 3rem;
  }

  .card-title {
    font-size: 2rem;
    font-weight: 600;
    color: #1d1d1f;
    margin-bottom: 2rem;
    text-align: center;
  }

  .form-label {
    font-weight: 500;
    color: #6e6e73;
    margin-bottom: 0.25rem;
  }

  .input-group-text {
    background-color: #f2f2f7;
    border: none;
    border-radius: 0.75rem 0 0 0.75rem;
  }

  .form-control {
    background-color: #f2f2f7;
    border: none;
    border-radius: 0 0.75rem 0.75rem 0;
    padding: 0.75rem;
    transition: background-color 0.3s, box-shadow 0.3s;
  }

  .form-control:focus {
    background-color: #fff;
    box-shadow: 0 0 0 3px rgba(0, 113, 227, 0.2);
    outline: none;
  }

  .btn-primary {
    background-color: #ffadd5;
    border: none;
    border-radius: 0.75rem;
    padding: 0.75rem;
    font-weight: 600;
    transition: background-color 0.3s, box-shadow 0.3s;
  }

  .btn-primary:hover {
    background-color: #ff5af7;
  }

  .link-secondary {
    display: inline-block;
    margin-top: 1rem;
    color: #ffdff9;
    text-decoration: none;
  }

  .link-secondary:hover {
    text-decoration: underline;
  }

  .invalid-feedback {
    font-size: 0.85rem;
  }
</style>
{% endblock %}
